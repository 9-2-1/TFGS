<!doctype HTML>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
		<title>TFGS 拓展使用方法</title>
		<style>
			textarea {
				width: 80%;
				height: 80%;
			}
		</style>
	</head>
	<body>
		<center>
			<b>需要注意：在使用类似的方式运行其他人提供的代码或者拓展时要小心，恶意代码或者拓展可能能够通过这种方式危害你的账号，请确保代码的来源可以信任后再运行。</b>
			<br />
			<a id="copyme" href="">右键这个链接，选择“加入到书签栏”，在需要使用的页面点击使用</a>
			<br />
			或者，复制右边的代码（点击自动全选）：
			<br />
			在需要的页面，点击地址栏，全部清空后<b>输入“j”后</b>再粘贴后回车。
			<br />
			<textarea id="copymee"></textarea>
			<br />
		</center>
		<script>
			var x;
			document.getElementById("copymee").value = x = "avascript:try{let M;if(\"__TFGS$nbhyBNaFkY\"in window)throw new Error(\"TFGS 已经安装\");function u(){return\"targetTouches\"in event?{x:Math.round(event.targetTouches[0].clientX),y:Math.round(event.targetTouches[0].clientY)}:{x:Math.round(event.clientX),y:Math.round(event.clientY)}}function d(e,t){e.style.display=t?\"inherit\":\"none\"}window.__TFGS$nbhyBNaFkY={},(M=window.tfgs={data:{}}).data.list={},M.data.getjson=function(){return JSON.stringify(M.data.list)},M.data.setjson=function(e){var t,n=JSON.parse(e);let i={};for(t in M.func.list){let e={};for(var o in M.func.list[t].option)e[o]=\"any\";i[t]={enable:\"boolean?\",data:\"any\",option:e},M.data.list=function t(n,i){if(\"object\"==typeof i){let e=Array.isArray(i)?[]:{};for(var o in i)e[o]=t(null==n?void 0:n[o],i[o]);return e}switch(i){case\"string\":case\"\":return String(n);case\"string!\":case\"!\":return\"string\"==typeof n?n:\"\";case\"string?\":case\"?\":return\"string\"==typeof n?n:void 0;case\"number\":case\"0\":return Number(n);case\"number!\":case\"0!\":return\"number\"==typeof n?n:0;case\"number?\":case\"0?\":return\"number\"==typeof n?n:void 0;case\"boolean\":return Boolean(n);case\"boolean!\":case\"false!\":return\"boolean\"==typeof n&&n;case\"boolean?\":case\"false?\":return\"boolean\"==typeof n?n:void 0;case\"array\":case\"[]\":{let e=[];for(var s in n)e[s]=n[s];return e}case\"array!\":case\"[]!\":return Array.isArray(n)?n:[];case\"array?\":case\"[]?\":return Array.isArray(n)?n:void 0;case\"object\":case\"{}\":{let e={};for(var r in n)e[r]=n[r];return e}case\"object!\":case\"{}!\":return Object.isObject(n)?n:{};case\"object?\":case\"{}?\":return Object.isObject(n)?n:void 0;case\"any\":return n}}(n,i)}M.func.datachange()},M.data.load=function(){return new Promise(function(e,t){let n=null,i=null;function o(){null===n&&\"localStorage\"in window&&(n=localStorage.getItem(\"-tfgs-\")),e(n)}\"chrome\"in window&&\"storage\"in chrome?i=chrome.storage:\"browser\"in window&&\"storage\"in browser&&(i=browser.storage),null!==i?i.sync.getItem(\"-tfgs-\",function(e){n=e[\"-tfgs-\"],o()}):o()}).then(M.data.setjson)},M.data.save=function(){return new Promise(function(e,t){let n=null;function i(){\"localStorage\"in window&&localStorage.setItem(\"-tfgs-\",M.data.getjson()),e()}\"chrome\"in window&&\"storage\"in chrome?n=chrome.storage:\"browser\"in window&&\"storage\"in browser&&(n=browser.storage),null!==n?n.sync.setItem({\"-tfgs-\":M.data.getjson()},function(e){i()}):i()})},M.data.import=function(){return new Promise(function(n,e){let i=document.createElement(\"input\");i.type=\"file\",i.addEventListener(\"change\",function(e){if(0<i.files.length){let t=new FileReader;t.addEventListener(\"load\",function(e){n(t.result.toString())}),t.readAsBinaryString(i.files[0])}}),i.click()}).then(M.data.setjson).then(M.data.save).then(M.menu.load)},M.data.export=function(){let i=M.data.getjson();return new Promise(function(e,t){let n=document.createElement(\"a\");n.href=\"data:text/plain;charset:utf-8,\"+i,n.download=\"tfgs-options.json\",n.click(),e()})},M.data.edit=function(){return M.funcapi.prompt(\"-tfgs-\",\"编辑配置文本\",M.data.getjson()).then(function(e){null!==e&&M.data.setjson(e)})},M.drag={},M.drag.setdrag=function(i,o){function e(e){var t,n=o.onStart(e);if(null!==n)return t=u(),l=t,s=t.x-n.x,r=t.y-n.y,a=\"click\",window.addEventListener(\"mousemove\",c),i.addEventListener(\"mousemove\",c),window.addEventListener(\"mouseup\",d),i.addEventListener(\"mouseup\",d),window.addEventListener(\"mouseleave\",d),window.addEventListener(\"blur\",d),i.addEventListener(\"touchmove\",c),i.addEventListener(\"touchend\",d),e.preventDefault(),e.stopPropagation(),!(e.cancelBubble=!0)}let s,r,a,l,c=function(e){var t=u();return l.x===t.x&&l.y===t.y||(o.onMove(t.x-s,t.y-r,e),l=t,a=\"drag\"),e.preventDefault(),e.stopPropagation(),!(e.cancelBubble=!0)},d=function(e){return o.onEnd(a,e),window.removeEventListener(\"mousemove\",c),i.removeEventListener(\"mousemove\",c),window.removeEventListener(\"mouseup\",d),i.removeEventListener(\"mouseup\",d),window.removeEventListener(\"mouseleave\",d),window.removeEventListener(\"blur\",d),i.removeEventListener(\"touchmove\",c),i.removeEventListener(\"touchend\",d),e.preventDefault(),e.stopPropagation(),!(e.cancelBubble=!0)};return i.addEventListener(\"mousedown\",e),i.addEventListener(\"touchstart\",e),function(){i.removeEventListener(\"mousedown\",e),i.removeEventListener(\"touchstart\",e)}},M.error=function(e){throw alert(e.message),console.error(e),e},M.func={},M.func.list={},M.func.add=function(e){if(e.id in M.func.list)throw new Error(\"id used: \"+e.id);M.func.list[e.id]={name:e.name,info:e.info,default:e.default,option:e.option,onenable:e.onenable,ondisable:e.ondisable,onoption:e.onoption,enable:!1}},M.func.default=function(t){let n={};var i,o=M.func.list;for(i in o){var s,r=o[i].option;let e={};for(s in r)e[s]=r[s].default;n[i]={enable:o[i].default,option:e,data:!t&&i in M.data.list?M.data.list[i].data:void 0}}M.data._default(n)},M.func.datachange=function(){for(var t in M.func.fixoption(),M.func.list){let e=M.func.list[t];var n=M.data.list[t].enable;if(e.enable!==n){try{e[n?\"onenable\":\"ondisable\"](M.funcapi._getapi(t))}catch(e){M.funcapi.error(t,\"Error: \"+e.message),console.error(e)}e.enable=n}else if(n)try{e.onoption(M.funcapi._getapi(t))}catch(e){M.funcapi.error(t,\"Error: \"+e.message),console.error(e)}}},M.func.fixoption=function(){var n,e=M.func.list;for(n in e){\"boolean\"!=typeof M.data.list[n].enable&&(M.data.list[n].enable=e[n].default);var i,o=e[n].option;for(i in o){let e=o[i],t=M.data.list[n].option;switch(e.type){case\"text\":null!==t[i]&&void 0!==t[i]||(t[i]=e.default),\"string\"!=typeof t[i]&&(t[i]=String(t[i])),\"maxlength\"in e&&t[i].length>e.maxlength&&(t[i]=t[i].slice(0,e.maxlength));break;case\"number\":\"number\"!=typeof t[i]&&(t[i]=Number(t[i])),isNaN(t[i])&&(t[i]=e.default),t[i]<e.min&&(t[i]=e.min),t[i]>e.max&&(t[i]=e.max);break;case\"check\":\"boolean\"!=typeof t[i]&&(t[i]=e.default);break;case\"menu\":e.value.includes(t[i])||(t[i]=e.default)}}}},M.funcapi={},M.funcapi.log=function(e,t){console.log(e,t),M.log.add(e,\"#000000\",t)},M.funcapi.warn=function(e,t){console.warn(e,t),M.log.add(e,\"#808000\",t)},M.funcapi.onerror=function(e,t){console.error(e,t),M.log.add(e,\"#E00000\",t.message)},M.funcapi.error=function(e,t){console.error(e,t),M.log.add(e,\"#E00000\",t)},M.funcapi.info=function(e,t){console.info(e,t),M.log.add(e,\"#2020F0\",t)},M.funcapi.getoption=function(e){return M.data.list[e].option},M.funcapi.getdata=function(e){return M.data.list[e].data},M.funcapi.setdata=function(e,t){return M.data.list[e].data=t,M.data.save()},M.funcapi.alert=function(e,n){return new Promise(function(e,t){alert(n),e()})},M.funcapi.confirm=function(e,n){return new Promise(function(e,t){e(confirm(n))})},M.funcapi.prompt=function(e,n,i){return new Promise(function(e,t){e(prompt(n,i))})},M.funcapi.blockly=function(e){return\"Blockly\"in window?window.Blockly:\"ClipCCExtension\"in window?window.ClipCCExtension.getBlockInstance():void 0},M.funcapi.workspace=function(e){return M.funcapi.blockly().getMainWorkspace()},M.funcapi.toolbox=function(e){return M.funcapi.workspace().getFlyout().getWorkspace()},M.funcapi.selele=function(e,t,n){return(void 0===n?document:n).querySelector(`*[class^=\"${t}\"], *[class*=\" ${t}\"]`)},M.funcapi.selcss=function(e,t,n){var i,e=M.funcapi.selele(e,t,n);if(null===e)return null;let o=e.classList;for(i in o)if(t===o[i].slice(0,t.length))return o[i];return null},M.funcapi.reactInternal=function(e,t){let n=\"__reactInternalInstance$\",i=\"__reactFiber$\",o=null;return Object.keys(t).forEach(function(e){e.slice(0,n.length)===n&&(o=e),e.slice(0,i.length)===i&&(o=e)}),null===o?void 0:t[o]},M.funcapi.store=function(e){return M.funcapi.reactInternal(e,M.funcapi.selele(e,\"gui_page-wrapper_\")).child.stateNode.store},M.funcapi.vm=function(t){let n=[];try{return window.ClipCCExtension.api.getVmInstance()}catch(e){n.push(e);try{return tfs.funcapi.selele(t,\"gui_page-wrapper_\").return.return.return.return.return.return.return.return.stateNode.props.vm}catch(e){n.push(e);try{return M.funcapi.reactInternal(t,M.funcapi.selele(\"stage-wrapper_\")).return.return.return.return.return.return.return.return.return.return.stateNode.props.vm}catch(e){n.push(e);try{return M.funcapi.store(t).getState().scratchGui.vm}catch(e){for(var i in n.push(e),e)M.funcapi.error(t,`funcapi: 方法${i+1}错误:`),M.funcapi.onerror(t,e);throw new Error(\"tfgs.funcapi.vm: cannot find vm\")}}}}},M.funcapi.paint=function(e){return M.funcapi.store(e).getState().scratchPaint},M.funcapi._getapi=function(n){let t={};for(let e in M.funcapi)t[e]=function(){let t=[n];for(let e=0;e<arguments.length;e++)t.push(arguments[e]);return M.funcapi[e].apply(M.funcapi,t)};return t},M.log={},M.log.list=[],M.log.dispIntv=null,M.log.add=function(e,t,n){for(M.log.list.push({name:e,color:t,log:n});500<M.log.list.length;)M.log.list.splice(0,1);M.log.changed=!0},M.log.clear=function(){M.log.list=[],M.log.changed=!0},M.log.displayInterval=function(n,i){return M.log.display(n,i),M.log.changed=!1,setInterval(function(){var e=n.scrollX,t=n.scrollY;M.log.changed&&(n.innerHTML=\"\",M.log.display(n,i)&&M.log.logwin.flash(500,3,!0),M.log.changed=!1),n.scrollX=e,n.scrollY=t},100)},M.log.display=function(t,e){let n=!0;for(var i in t.classList.add(\"tfgsLogFormat\"),M.log.list){i=M.log.list[i];if((null===e.name||e.name.includes(i.name))&&(null===e.color||e.color.includes(i.color))){let e=M.element.create(\"div\");e.style.color=i.color,e.innerText=i.name+\"\\t\"+i.log,t.appendChild(e),n=!1}}return!n},M.log.create=function(i,o){try{if(null!==M.log.dispIntv)return M.log.logwin.movetotop(),void M.log.logwin.flash(200,3,!1);let e=M.log.logwin=M.window.create({title:\"日志\",x:\"number\"==typeof i?i:20,y:\"number\"==typeof o?o:20,width:200,height:200,minWidth:100,minHeight:50,minimizeWidth:70}),t=e.innerDiv;t.innerHTML=`\\n<div class=\"tfgsLogContent\"></div>\\n<div class=\"tfgsLogButtons\">\\n\t<span class=\"tfgsButton tfgsRight\">清空</span>\\n</div>\\n`;var s=t.children[0];let n=t.children[1].children[0];M.log.dispIntv=M.log.displayInterval(s,{name:null,color:null}),n.addEventListener(\"click\",function(){M.log.clear()}),e.onClose=function(){clearInterval(M.log.dispIntv),t.remove(),M.log.dispIntv=null}}catch(e){M.error(e)}},M.menu={},M.menu.menuwin=null,M.menu.modi=!1,window.addEventListener(\"beforeunload\",function(e){if(M.menu.modi)return e.preventDefault(),e.returnValue=\"\"}),M.menu.setmodi=function(n){if(n!==M.menu.modi){let t=M.menu.buttons;for(var i in t){let e=!0;switch(i){case\"edit\":continue;case\"save\":case\"cancel\":e=!1}t[i].classList[n===e?\"add\":\"remove\"](\"tfgsDisable\")}M.menu.menuwin.title=n?\"TFGS 选项 (未保存)\":\"TFGS 选项\",M.menu.menuwin.canMinimize=!n,M.menu.menuwin._refresh(),M.menu.modi=n}},M.menu.create=function(){if(null===M.menu.menuwin){let e=M.window.create({title:\"TFGS选项\",canMinimize:!0,canClose:!1,x:50,y:50,width:400,height:300,minWidth:200,minHeight:100,minimizeWidth:100}),t=(e.minimize(),e.innerDiv),n=(t.innerHTML=`\\n<div class=\"tfgsMenuContent\">\\n\t<!--<span class=\"tfgsMenuFuncSelect\">Test</span>\\n\t<span class=\"tfgsMenuFuncSelect\">Test</span>\\n\t<span class=\"tfgsMenuFuncSelect\">Test</span>\\n\t<span class=\"tfgsMenuFuncSelect\">Test</span>\\n\t<span class=\"tfgsMenuFuncSelect\">Test</span>\\n\t<span class=\"tfgsMenuFuncSelect\">Test</span>\\n\t<span class=\"tfgsMenuFuncSelect\">Test</span>\\n\t<span class=\"tfgsMenuFuncSelect\">Test</span>-->\\n</div>\\n<div class=\"tfgsMenuButtons\">\\n\t<span class=\"tfgsButton\">导出</span>\\n\t<span class=\"tfgsButton\">导入</span>\\n\t<span class=\"tfgsButton tfgsDisable\">编辑文本</span>\\n\t<span class=\"tfgsButton tfgsRight\">显示日志</span>\\n\t<span class=\"tfgsButton tfgsRight tfgsDisable\">取消更改</span>\\n\t<span class=\"tfgsButton tfgsDisable\">保存更改</span>\\n</div>\\n`,M.menu.contentdiv=t.children[0]);var r=M.menu.buttondiv=t.children[1];let i=M.menu.buttons={},o=(i.export=r.children[0],i.import=r.children[1],i.edit=r.children[2],i.log=r.children[3],i.cancel=r.children[4],i.save=r.children[5],i.export.addEventListener(\"click\",function(){M.menu.modi||M.data.export()}),i.import.addEventListener(\"click\",function(){M.menu.modi||M.data.import().catch(M.error)}),i.edit.addEventListener(\"click\",function(){M.menu.modi||M.data.edit().then(M.data.save).then(M.menu.load).catch(M.error)}),i.log.addEventListener(\"click\",function(){M.menu.modi||M.log.create()}),!1);e.onResize=function(){o!==e.isMinimize&&(e.isMinimize?M.menu.modi&&e.restore():M.menu.load(),o=e.isMinimize)},i.save.addEventListener(\"click\",function(){if(M.menu.modi)try{M.menu.save().then(function(){M.menu.load(),M.menu.setmodi(!1)}).catch(M.error)}catch(e){M.error(e)}}),i.cancel.addEventListener(\"click\",function(){if(M.menu.modi&&confirm(\"取消更改？\"))try{M.menu.load(),M.menu.setmodi(!1)}catch(e){alert(e.message)}});var a,l=M.func.list;let s=M.menu.list={};for(a in l){var c=l[a];let e=M.element.create(\"div\",\"tfgsMenuFunc\"),i=(e.innerHTML=`\\n<div class=\"tfgsMenuFuncTitle\">\\n\t<input type=\"checkbox\"></input>\\n\t<span class=\"tfgsMenuFuncName\"></span>\\n\t<span class=\"tfgsMenuFuncInfo\"></span>\\n</div>\\n<div class=\"tfgsMenuFuncOption\"></div>\\n`,s[a]={});function d(e,t){return null!=e&&\"\"!==e?e+t:\"\"}i.enable=e.children[0].children[0],i.enable.addEventListener(\"change\",function(){M.menu.setmodi(!0)}),i.option={},e.children[0].children[1].innerText=c.name,e.children[0].children[2].innerText=d(c.version,\" \")+d(c.author,\" \")+d(c.info,\"\");let o=e.children[1];var u,f=c.option;for(u in f){var p=f[u];let e,t;switch((e=M.element.create(\"label\")).innerText=p.name,p.type){case\"number\":t=M.element.create(\"input\",void 0,\"number\");break;case\"text\":t=M.element.create(\"input\");break;case\"check\":t=M.element.create(\"input\",void 0,\"checkbox\");break;case\"menu\":for(var h in t=M.element.create(\"select\"),p.menu){let e=M.element.create(\"option\");e.innerText=p.menu[h],e.value=h,t.appendChild(e)}break;default:throw new Error(\"Unsupport type: \"+p.type)}i.option[u]=t;let n=M.element.create(\"span\",\"tfgsMenuFuncOptionOne\");n.appendChild(e),n.appendChild(t),o.appendChild(n),t.addEventListener(\"input\",function(){M.menu.setmodi(!0)}),t.addEventListener(\"paste\",function(){M.menu.setmodi(!0)}),t.addEventListener(\"change\",function(){M.menu.setmodi(!0)})}n.appendChild(e)}M.menu.menuwin=e,M.menu.load()}},M.menu.save=function(){return M.data.setjson(M.menu._json()),M.data.save()},M.menu._json=function(){var t,n=M.func.list,i=M.menu.list;let o={};for(t in n){var s=n[t],r=i[t];let e=o[t]={};e.enable=r.enable.checked,e.option={};var a,l=s.option;for(a in l){var c=l[a],d=r.option[a];switch(c.type){case\"number\":e.option[a]=Number(d.value);break;case\"text\":e.option[a]=d.value;break;case\"check\":e.option[a]=d.checked;break;case\"menu\":e.option[a]=c.value[Number(d.value)];break;default:throw new Error(\"类型错误: \"+c.type)}}}return JSON.stringify(o)},M.menu.load=function(){var e,t=M.func.list,i=M.data.list,o=M.menu.list;for(e in t){var s=t[e],r=i[e];let n=o[e];n.enable.checked=r.enable;var a,l=s.option;for(a in l){let e=l[a],t=n.option[a];var c=r.option[a];switch(e.type){case\"number\":case\"text\":t.value=c;break;case\"check\":t.checked=c;break;case\"menu\":e.value.includes(c)&&(t.options[e.value.indexOf(c)].selected=!0);break;default:throw new Error(\"Unsupport type: \"+e.type)}}}},M.menu.delete=function(){M.menu.menuwin.canClose=!0,M.menu.menuwin.close(),M.menu.menuwin=null},M.window={},M.window.zIndex=1e6,M.window.create=function(e){let i={titleDiv:null,innerDiv:null,windowDiv:null,resizeDiv:null,x:NaN,y:NaN,width:400,height:300,minHeight:0,minWidth:100,minimizeWidth:100,title:\"\",haveLogo:!0,canMinimize:!0,canMaximize:!0,canClose:!0,canResize:!0,canMove:!0,onClose:function(){},onResize:function(){},onMove:function(){},isMinimize:!1,isMaximize:!1,posRestore:{},flashMode:!1,flashTimer:-1,_rememberPos:function(){this.isMinimize||this.isMaximize||(this.posRestore.x=this.x,this.posRestore.y=this.y,this.posRestore.width=this.width,this.posRestore.height=this.height)},minimize:function(){this._rememberPos(),this.isMinimize=!0,this.isMaximize=!1,this._refresh(),this.onResize(),this.onMove()},maximize:function(){this._rememberPos(),this.isMinimize=!1,this.isMaximize=!0,this._refresh(),this.onResize(),this.onMove()},restore:function(){(this.isMinimize||this.isMaximize)&&(this.isMaximize&&(this.x=this.posRestore.x,this.y=this.posRestore.y),this.width=this.posRestore.width,this.height=this.posRestore.height,this.isMinimize=!1,this.isMaximize=!1,this._refresh(),this.onResize(),this.onMove())},movetotop:function(){this.windowDiv.style.zIndex=++M.window.zIndex,this.flashMode&&(this.windowDiv.classList.remove(\"tfgsEmergency\"),this.flashMode=!1),-1!==this.flashTimer&&(clearInterval(this.flashTimer),this.flashTimer=-1)},close:function(){!1!==this.onClose()&&(this.windowDiv.remove(),this.windowDiv=null,window.removeEventListener(\"resize\",t._resizeCallback))},resize:function(e,t){e===this.width&&t===this.height||(this.width=e,this.height=t,this._refresh(),this.onResize())},move:function(e,t){e===this.x&&t===this.y||(this.x=e,this.y=t,this._refresh(),this.onMove())},flash:function(e,t,n){-1!==this.flashTimer&&clearInterval(this.flashTimer),this.windowDiv.classList.add(\"tfgsEmergency\");let i=!0,o=this;this.flashTimer=setInterval(function(){0<t?i?(o.windowDiv.classList.remove(\"tfgsEmergency\"),i=!1,t--):(o.windowDiv.classList.add(\"tfgsEmergency\"),i=!0):(n&&(o.windowDiv.classList.add(\"tfgsEmergency\"),i=!0),clearInterval(o.flashTimer),o.flashTimer=-1),o.flashMode=i},e)},_refresh:function(){var r=window.innerWidth,a=window.innerHeight;if(this.isMaximize)this.x=0,this.y=0,this.width=r,this.height=a;else{let e=this.minWidth+6,t=this.minHeight+26,n=this.x,i=this.y,o=this.width,s=this.height;this.isMinimize?(o=this.minimizeWidth+6,s=26):(o<e&&(o=e),s<t&&(s=t),o>r&&(o=r),s>a&&(s=a));var l=n+o,c=i+s;isNaN(n)&&(n=Math.floor(Math.random()*(r-o))),isNaN(i)&&(i=Math.floor(Math.random()*(a-s))),n<0&&(n=0),i<0&&(i=0),r<l&&(n-=l-r),a<c&&(i-=c-a),this.x=n,this.y=i,this.width=o,this.height=s}let e=this.windowDiv.style;e.left=this.x+\"px\",e.top=this.y+\"px\",e.width=this.width+\"px\",e.height=this.height+\"px\",d(this.titleDiv.children[0],!this.isMinimize&&this.haveLogo),this.titleDiv.children[1].innerText=this.title,d(this.titleDiv.children[2],!this.isMinimize&&this.canMinimize),d(this.titleDiv.children[3],this.isMaximize),d(this.titleDiv.children[4],!this.isMinimize&&!this.isMaximize&&this.canMaximize),d(this.titleDiv.children[5],this.canClose),d(this.innerDiv,!this.isMinimize),d(this.resizeDiv,!this.isMinimize&&!this.isMaximize&&this.canResize)}},t=(i=Object.assign(i,e),M.element.create(\"div\",\"tfgsWindow\"));t.innerHTML=`\\n<div class=\"tfgsWindowTitle\">\\n\t<span>≡</span>\\n\t<span class=\"tfgsWindowText\"></span>\\n\t<span>_</span>\\n\t<span>▭</span>\\n\t<span>□</span>\\n\t<span>✕</span>\\n</div>\\n<div class=\"tfgsWindowContent\"></div>\\n<div class=\"tfgsWindowResize\"></div>\\n`,document.body.appendChild(t),t.style.zIndex=++M.window.zIndex,t._resizeCallback=function(){i._refresh(),i.onResize()},window.addEventListener(\"resize\",t._resizeCallback);var e=t.children[0],n=t.children[1],o=t.children[2];let s=e.children;t.addEventListener(\"mousedown\",function(e){i.movetotop()},!0),s[2].addEventListener(\"click\",function(e){i.minimize()}),s[3].addEventListener(\"click\",function(e){i.restore()}),s[4].addEventListener(\"click\",function(e){i.maximize()}),s[5].addEventListener(\"click\",function(e){i.close()});var r={onStart:function(e){return i.isMaximize?null:(i.movetotop(),{x:i.x,y:i.y})},onMove:function(e,t,n){i.canMove&&i.move(e,t)},onEnd:function(e,t){\"click\"===e&&i.isMinimize&&i.restore()}};return M.drag.setdrag(s[0],r),M.drag.setdrag(s[1],r),M.drag.setdrag(o,{onStart:function(e){return{x:i.width,y:i.height}},onMove:function(e,t,n){i.resize(e,t)},onEnd:function(e,t){}}),i.windowDiv=t,i.titleDiv=e,i.innerDiv=n,i.resizeDiv=o,i._refresh(),i.flash(300,1,!1),i},M.element={},M.element.create=function(e,t,n){let i=document.createElement(e);return void 0!==t&&(i.className=t),i.className=t,void 0!==n&&(i.type=n),i};{let l={},t,u=null,f=!1,p=!1,h=!1,c=0,d=0,m=!1,g=0,v=0,y=0,w=null,b=-1,x=-1,k=!1,o=-1;function i(e){p=e.ctrlKey,h=e.altKey,f=e.shiftKey}function L(n){var e,i=u.innerDiv.children[0].children;for(let t=0;t<i.length;t++){let e=i[t];e.style.display=n===t?\"flex\":\"none\"}2===(o=n)&&0!==(e=i[2].children).length&&(S(e[0],l.joyleft,l.joyleftcustom),S(e[1],l.joyright,l.joyrightcustom))}function s(){var e=u.innerDiv.children[0].children,t=e[0];let n=e[1],i=e[2],o=(_(t,[\"`1234567890-=⌫\\n⇄qwertyuiop[]\\\\\\n asdfghjkl';↵\\n⇧zxcvbnm,./ \\n⌃⌥␣←↑↓→⌬\",\"1234567890\\nqwertyuiop\\nasdfghjkl\\nzxcvbnm↑↵\\n⌬␣←↓→\"][l.fullkey?0:1],1),n.innerHTML=`\\n<span class=\"tfgsJoystickMouseMove\"></span>\\n<span>\\n\t<span class=\"tfgsJoystickMouseClick\">\\n\t\t<svg width=20 height=30>\\n\t\t\t<path d=\"\\n\t\t\t\tM 1 10\\n\t\t\t\tA 9 9 0 0 1 19 10\\n\t\t\t\tL 19 20\\n\t\t\t\tA 9 9 0 0 1 1 20\\n\t\t\t\tZ\\n\t\t\t\tM 1 15\\n\t\t\t\tL 19 15\\n\t\t\t\tM 10 1\\n\t\t\t\tL 10 5\\n\t\t\t\tM 8 7\\n\t\t\t\tA 2 2 0 0 1 12 7\\n\t\t\t\tL 12 9\\n\t\t\t\tA 2 2 0 0 1 8 9\\n\t\t\t\tZ\\n\t\t\t\tM 10 11\\n\t\t\t\tL 10 15\\n\t\t\t\" stroke=black stroke-width=1 fill=none />\\n\t\t\t<path d=\"\\n\t\t\t\tM 1 10\\n\t\t\t\tA 9 9 0 0 1 10 1\\n\t\t\t\tL 10 15\\n\t\t\t\tL 1 15\\n\t\t\t\" stroke=none fill=black />\\n\t\t</svg>\\n\t</span>\\n\t<span class=\"tfgsJoystickMouseClick\">\\n\t\t<svg width=20 height=30>\\n\t\t\t<path d=\"\\n\t\t\t\tM 1 10\\n\t\t\t\tA 9 9 0 0 1 19 10\\n\t\t\t\tL 19 20\\n\t\t\t\tA 9 9 0 0 1 1 20\\n\t\t\t\tZ\\n\t\t\t\tM 1 15\\n\t\t\t\tL 19 15\\n\t\t\t\tM 10 1\\n\t\t\t\tL 10 5\\n\t\t\t\tM 8 7\\n\t\t\t\tA 2 2 0 0 1 12 7\\n\t\t\t\tL 12 9\\n\t\t\t\tA 2 2 0 0 1 8 9\\n\t\t\t\tZ\\n\t\t\t\tM 10 11\\n\t\t\t\tL 10 15\\n\t\t\t\" stroke=black stroke-width=1 fill=none />\\n\t\t\t<path d=\"\\n\t\t\t\tM 8 7\\n\t\t\t\tA 2 2 0 0 1 12 7\\n\t\t\t\tL 12 9\\n\t\t\t\tA 2 2 0 0 1 8 9\\n\t\t\t\" stroke=none fill=black />\\n\t\t</svg>\\n\t</span>\\n\t<span class=\"tfgsJoystickMouseClick\">\\n\t\t<svg width=20 height=30>\\n\t\t\t<path d=\"\\n\t\t\t\tM 1 10\\n\t\t\t\tA 9 9 0 0 1 19 10\\n\t\t\t\tL 19 20\\n\t\t\t\tA 9 9 0 0 1 1 20\\n\t\t\t\tZ\\n\t\t\t\tM 1 15\\n\t\t\t\tL 19 15\\n\t\t\t\tM 10 1\\n\t\t\t\tL 10 5\\n\t\t\t\tM 8 7\\n\t\t\t\tA 2 2 0 0 1 12 7\\n\t\t\t\tL 12 9\\n\t\t\t\tA 2 2 0 0 1 8 9\\n\t\t\t\tZ\\n\t\t\t\tM 10 11\\n\t\t\t\tL 10 15\\n\t\t\t\" stroke=black stroke-width=1 fill=none />\\n\t\t\t<path d=\"\\n\t\t\t\tM 10 1\\n\t\t\t\tA 9 9 0 0 1 19 10\\n\t\t\t\tL 19 15\\n\t\t\t\tL 10 15\\n\t\t\t\" stroke=none fill=black />\\n\t\t</svg>\\n\t</span>\\n\t<span class=\"tfgsJoystickMouseClick\">▲</span>\\n\t<span class=\"tfgsJoystickMouseClick\">▼</span>\\n\t<span class=\"tfgsJoystickMouseSwitch\">◎∷</span>\\n</span>`,n.children[0].onmousedown=n.children[0].ontouchstart=E,n.children[0].onmousemove=n.children[0].ontouchmove=E,n.children[0].onmouseleave=n.children[0].onmouseup=n.children[0].ontouchend=E,a(n.children[1].children[0],0),l.mousebuttons?(a(n.children[1].children[1],1),a(n.children[1].children[2],2)):(n.children[1].children[1].style.display=\"none\",n.children[1].children[2].style.display=\"none\"),r(n.children[1].children[3],-120),r(n.children[1].children[4],120),n.children[1].children[5].onmousedown=n.children[1].children[5].ontouchstart=function(e){this.style.background=\"grey\"},n.children[1].children[5].onmouseup=n.children[1].children[5].ontouchend=function(e){this.style.background=\"inherit\",L(2)},i.innerHTML='<span></span><span></span><span class=\"tfgsJoystickSwitch\">⌨</span>',i.children);o[2].onmousedown=o[2].ontouchstart=function(){this.style.background=\"grey\"},o[2].onmouseup=o[2].ontouchend=function(){this.style.background=\"inherit\",L(0)},S(o[0],l.joyleft,l.joyleftcustom),S(o[1],l.joyright,l.joyrightcustom)}function r(e,n){function t(){var e=c,t=d;z(WheelEvent,e,t,\"wheel\",{deltaY:n/4,wheelDelta:-n})}let i=-1;e.onmousedown=e.ontouchstart=function(e){-1!==i&&clearInterval(i),t(),i=setInterval(t,50),this.style.background=\"grey\"},e.onmouseleave=e.onmouseup=e.ontouchend=function(e){-1!==i&&clearInterval(i),this.style.background=\"inherit\"}}function a(e,t){e.onmousedown=e.ontouchstart=function(e){T(c,d,\"mousedown\",{button:t}),this.style.background=\"grey\"},e.onmouseleave=e.onmouseup=e.ontouchend=function(e){T(c,d,\"mouseup\",{button:t}),this.style.background=\"inherit\"}}function E(e){let t;switch(e.type){case\"mousedown\":k=!0,this.style.background=\"grey\",t=[{clientX:e.clientX,clientY:e.clientY}];break;case\"mousemove\":t=k?[{clientX:e.clientX,clientY:e.clientY}]:[];break;case\"mouseup\":case\"mouseleave\":k=!1,this.style.background=\"inherit\",t=[];break;default:t=e.targetTouches}let n=0,i=0,o=(new Date).getTime();for(let e=0;e<t.length;e++)n+=t[e].clientX,i+=t[e].clientY;var s,r,a;null===w&&(w=M.element.create(\"span\",\"tfgsJoystickCursor\"),document.body.appendChild(w),w.innerHTML=`<svg>\\n\t<defs>\\n\t\t<filter id=\"fl\" x=\"0\" y=\"0\" width=\"100\" height=\"100\">\\n\t\t\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"1\" result=\"blur\"/>\\n\t\t\t<feOffset in=\"blur\" dx=\"1\" dy=\"1\" result=\"offsetBlur\"/>\\n\t\t\t<feBlend in=\"SourceGraphic\" in2=\"offsetBlur\" mode=\"normal\">\\n\t\t</filter>\\n\t</defs>\\n\t<path d=\"\\n\t\tM 0 0\\n\t\tL 15 20\\n\t\tL 10 21.67\\n\t\tL 14 29.67\\n\t\tL 9 31.33\\n\t\tL 5 23.33\\n\t\tL 0 25\\n\t\tZ\\n\t\" stroke=black stroke-width=1 fill=white filter=\"url(#fl)\" />\\n</svg>`),\"touchmove\"===e.type||\"mousemove\"===e.type&&k?(n/=t.length,i/=t.length,s=n-g,r=i-v,a=o-y,a=Math.sqrt(s*s+r*r)/(a/1e3),a=l.mousespeed*(a/(a+l.mouseaccer)),c+=s*a,d+=r*a,c<0&&(c=0),d<0&&(d=0),c>window.innerWidth-1&&(c=window.innerWidth-1),d>window.innerHeight-1&&(d=window.innerHeight-1),g=n,v=i,y=o,T(c,d,\"mousemove\",{})):(m=l.mouse2click&&1<t.length?(m||(T(c,d,\"mousedown\",{}),this.style.background=\"grey\"),!0):(m&&(T(c,d,\"mouseup\",{}),this.style.background=\"inherit\"),!1),0<t.length&&(g=n/t.length,v=i/t.length,y=o)),w.style.left=c-1+\"px\",w.style.top=d-1+\"px\"}function C(t,n){n=F(n,f);{n={key:n.cname,code:n.ccode,keyCode:n.ccode},t=new KeyboardEvent(t,Object.assign({view:window,ctrlKey:p,altKey:h,shiftKey:f,bubbles:!0,cancelable:!0},n));let e=document.activeElement;(e=null===e?window:e).dispatchEvent(t)}}function z(e,t,n,i,o){const s=new e(i,Object.assign({view:window,ctrlKey:p,altKey:h,shiftKey:f,clientX:t,clientY:n,bubbles:!0,cancelable:!0},o));let r=document.elementFromPoint(t,n),a=s.clientX,l=s.clientY;if(null!==r)for(;;){let e=null;var c;if(\"iframe\"===r.tagName.toLowerCase()?(c=r.getBoundingClientRect(),a-=c.left,l-=c.top,e=r.contentWindow.document.elementFromPoint(a,l)):\"mousedown\"===i&&null!==r.shadowRoot&&void 0!==r.shadowRoot&&(e=r.shadowRoot.elementFromPoint(a,l)),null===e)break;r=e}let d=r=null===r?window:r;for(;null!==d&&d!==u.windowDiv;)d=d.parentElement;null===d&&(s.clientX=a,s.clientY=l,r.dispatchEvent(s))}function T(e,t,n,i){z(MouseEvent,e,t,n,i)}function _(t,n,i){for(var o in t.innerHTML=\"\",n=n.split(\"\\n\")){var s,r=n[o].split(\"\");let e=M.element.create(\"span\");for(s in r){var a=r[s];e.appendChild(function(t,n){let i=M.element.create(\"span\");var e=F(t,!1),o=F(t,!0);function s(){\"Control\"===r&&(p=!0),\"Alt\"===r&&(h=!0),\"Shift\"===r&&(f=!0),C(\"keydown\",t)}let r=e.cname,a=o.cname;return\"tfgsSwitch\"===r?i.innerHTML=`<svg width=20 height=30>\\n\t<path d=\"\\n\t\tM 1 10\\n\t\tA 9 9 0 0 1 19 10\\n\t\tL 19 20\\n\t\tA 9 9 0 0 1 1 20\\n\t\tZ\\n\t\tM 1 15\\n\t\tL 19 15\\n\t\tM 10 1\\n\t\tL 10 5\\n\t\tM 8 7\\n\t\tA 2 2 0 0 1 12 7\\n\t\tL 12 9\\n\t\tA 2 2 0 0 1 8 9\\n\t\tZ\\n\t\tM 10 11\\n\t\tL 10 15\\n\t\" stroke=black stroke-width=1 fill=none />\\n</svg>`:i.innerText=t+(r.toLowerCase()!==a.toLowerCase()?\"\\n\"+a:\"\"),i.onmousedown=i.ontouchstart=function(e){\"tfgsSwitch\"!==r&&(-1!==b&&clearInterval(b),-1!==x&&clearTimeout(x),b=-1,x=-1,s(),\"Shift\"!==r&&\"Alt\"!==r&&\"Control\"!==r&&(x=setTimeout(function(){x=-1,s(),b=setInterval(s,l.keyInterval)},l.keyTimeout))),i.style.background=\"grey\"},i.onmouseleave=i.onmouseup=i.ontouchend=function(e){\"tfgsSwitch\"!==r?(-1!==b&&clearInterval(b),-1!==x&&clearTimeout(x),b=-1,x=-1,\"Control\"===r&&(p=!1),\"Alt\"===r&&(h=!1),\"Shift\"===r&&(f=!1),C(\"keyup\",t)):L(n),i.style.background=\"inherit\"},\"Unidentified\"===r&&(i.style.flexGrow=1.5),\"Shift\"===r&&(i.style.flexGrow=2),\"Control\"===r&&(i.style.flexGrow=2),\"Enter\"===r&&(i.style.flexGrow=1.5),\" \"===r&&(i.style.flexGrow=4),i}(a,i))}t.appendChild(e)}}function F(e,t){switch(e){case\"⌫\":ccode=8,cname=\"Backspace\";break;case\"⇄\":ccode=9,cname=\"Tab\";break;case\"␣\":ccode=32,cname=\" \";break;case\"↵\":ccode=13,cname=\"Enter\";break;case\"⇧\":ccode=0,cname=\"Shift\";break;case\"⌥\":ccode=0,cname=\"Alt\";break;case\"⌃\":ccode=0,cname=\"Control\";break;case\"←\":ccode=37,cname=\"ArrowLeft\";break;case\"↑\":ccode=38,cname=\"ArrowUp\";break;case\"→\":ccode=39,cname=\"ArrowRight\";break;case\"↓\":ccode=40,cname=\"ArrowDown\";break;case\" \":ccode=0,cname=\"Unidentified\";break;case\"⌬\":ccode=0,cname=\"tfgsSwitch\";break;default:ccode=e.toUpperCase().codePointAt(0),cname=t?\"`1234567890-=[]\\\\';.,/\".includes(e)?'~!@#$%25^&*()_+{}|\":<>?'[\"`1234567890-=[]\\\\';.,/\".indexOf(e)]:e.toUpperCase():e.toLowerCase()}return{ccode:ccode,cname:cname}}function S(e,t,n){switch(n=n.replace(/\\|/g,\"\\n\").replace(/\\{[^}]+\\}/g,function(e){var t={\"{space}\":\"␣\",\"{enter}\":\"↵\",\"{left}\":\"←\",\"{up}\":\"↑\",\"{down}\":\"↓\",\"{right}\":\"→\",\"{control}\":\"⌃\",\"{shift}\":\"⇧\",\"{alt}\":\"⌥\",\"{tab}\":\"⇄\",\"{backspace}\":\"⌫\",\"{leftcurly}\":\"{\",\"{rightcurly}\":\"}\",\"{switch}\":\"⌬\"};return e in t?t[e]:\" \"}),Math.floor(t/10)){case 1:{let r=[\"↑↓←→\",\"WSAD\",\"IKJL\",n][t%2510];e.innerHTML='<span class=\"tfgsJoystickJoystick\"><span><span></span></span></span>';var s=e.getBoundingClientRect(),s=.8*Math.min(s.right-s.left,s.bottom-s.top);e.children[0].style.setProperty(\"--size\",s+\"px\");let i=e.children[0].children[0],a=i.children[0],o=function(e,t){var e=e.getBoundingClientRect(),n=(e.left+e.right)/2,i=(e.top+e.bottom)/2;let o=(t=\"targetTouches\"in t?t.targetTouches[0]:t).clientX-n,s=t.clientY-i;n=Math.sqrt(o*o+s*s),t=(e.right-e.left)/2/2;t<n?(o/=n,s/=n):(o/=t,s/=t),s<-.38?C(\"keydown\",r[0]):C(\"keyup\",r[0]),.38<s?C(\"keydown\",r[1]):C(\"keyup\",r[1]),o<-.38?C(\"keydown\",r[2]):C(\"keyup\",r[2]),.38<o?C(\"keydown\",r[3]):C(\"keyup\",r[3]),a.style.left=o*t+\"px\",a.style.top=s*t+\"px\"};M.drag.setdrag(i,{onStart:function(e){return o(i,e),{x:0,y:0}},onMove:function(e,t,n){o(i,n)},onEnd:function(e){for(let e=0;e<4;e++)C(\"keyup\",r[e]);a.style.left=\"0px\",a.style.top=\"0px\"}});break}case 2:s=[\"FC\\nZX\",\"EQ\\nR␣\",\"UIO\\nJKL\",\"123\\n456\",\"⌃⇧\\n⌥␣\",\"↑↓{\\n←→}\",n][t%2510];e.classList.add(\"tfgsJoystickJoystickKeyBoard\"),_(e,s,0);break;case 3:e.innerHTML='<span class=\"tfgsJoystickJoystickMouse\"></span>',(e=e.children[0]).onmousedown=e.ontouchstart=E,e.onmousemove=e.ontouchmove=E,e.onmouseleave=e.onmouseup=e.ontouchend=E}}M.func.add({id:\"joystick\",name:\"虚拟摇杆\",info:\"显示自定义虚拟摇杆\",default:!1,option:{start:{type:\"menu\",name:\"默认模式\",menu:[\"键盘\",\"鼠标\",\"游戏手柄\"],value:[0,1,2],default:2},fullkey:{type:\"check\",name:\"键盘显示更多按键\",default:!1},keyTimeout:{type:\"number\",name:\"长按到自动连续按键的时间(毫秒)\",min:50,max:5e3,default:600},keyInterval:{type:\"number\",name:\"自动连续按键间隔(毫秒)\",min:5,max:5e3,default:50},mousespeed:{type:\"number\",name:\"鼠标指针速度\",min:.05,max:20,default:1},mouseaccer:{type:\"number\",name:\"鼠标指针减速\",min:0,max:1e4,default:500},mouse2click:{type:\"check\",name:\"放置两根手指模拟点击\",default:!0},mousebuttons:{type:\"check\",name:\"鼠标显示中键和右键\",default:!1},joyleft:{type:\"menu\",name:\"游戏手柄左侧布局\",menu:[\"摇杆(上下左右)\",\"摇杆(WSAD)\",\"摇杆(IKJL)\",\"摇杆(自定义)\",\"键盘(FC|ZX)\",\"键盘(EQ|R{space})\",\"键盘(UIO|JKL)\",\"键盘(123|456)\",\"键盘({ctrl}{shift}|{alt}{space})\",\"键盘({up}{down}{leftcurly}|{left}{right}{rightcurly})\",\"键盘(自定义)\",\"鼠标\"],value:[10,11,12,13,20,21,22,23,24,25,26,30],default:10},joyright:{type:\"menu\",name:\"游戏手柄右侧布局\",menu:[\"摇杆(上下左右)\",\"摇杆(WSAD)\",\"摇杆(IKJL)\",\"摇杆(自定义)\",\"键盘(FC|ZX)\",\"键盘(EQ|R{space})\",\"键盘(UIO|JKL)\",\"键盘(123|456)\",\"键盘({ctrl}{shift}|{alt}{space})\",\"键盘({up}{down}{leftcurly}|{left}{right}{rightcurly})\",\"键盘(自定义)\",\"鼠标\"],value:[10,11,12,13,20,21,22,23,24,25,26,30],default:20},joyleftcustom:{type:\"text\",name:\"左侧自定义\",default:\"WSAD\"},joyrightcustom:{type:\"text\",name:\"右侧自定义\",default:\"IKJL\"}},onenable:function(e){t=e,l=t.getoption();{window.addEventListener(\"keydown\",i),window.addEventListener(\"keyup\",i),f=!1,p=!1,h=!1,c=0,d=0,m=!1,g=0,v=0,y=0,w=null,b=-1,x=-1;let e=(u=M.window.create({title:\"JoyStick\",canClose:!1,canMaximize:!1,onResize:function(){var e;2===o&&0!==(e=u.innerDiv.children[0].children[2].children).length&&(S(e[0],l.joyleft,l.joyleftcustom),S(e[1],l.joyright,l.joyrightcustom))}})).innerDiv;return e.innerHTML=`\\n<div class=\"tfgsJoystick\">\\n\t<div class=\"tfgsJoystickKeyBoard\"></div>\\n\t<div class=\"tfgsJoystickMouse\"></div>\\n\t<div class=\"tfgsJoystickGamepad\"></div>\\n</div>`,e.onmousedown=e.ontouchstart=function(e){u.movetotop(),e.preventDefault(),e.stopPropagation()},e.onmousemove=e.ontouchmove=function(e){e.preventDefault(),e.stopPropagation()},e.onmouseup=e.ontouchend=function(e){e.preventDefault(),e.stopPropagation()},L(l.start),void s()}},ondisable:function(){window.removeEventListener(\"keydown\",i),window.removeEventListener(\"keyup\",i),null!==u&&(u.close(),u=null),null!==w&&(document.body.removeChild(w),w=null)},onoption:function(){var e=t.getoption();e.fullkey!==l.fullkey||e.mouse2click!==l.mouse2click||e.mousebuttons!==l.mousebuttons||e.joyleft!==l.joyleft||e.joyright!==l.joyright||e.joyleftcustom!==l.joyleftcustom||e.joyrightcustom!==l.joyrightcustom?(l=e,s()):l=e}})}{let f,t=-1,p={},n={},i=!1;function o(n){var i=n.buttonid,e=n.enable;let o=n.addinner,s=n.removeinner;var r=n.styles,a=n.targetcss;let l=n.cssname,c=n.onadd,d=n.onremove;if(e){if(void 0!==p[i]&&(e=f.selele(a),p[i].parentElement!==e&&(p[i].remove(),(p[i]=void 0)!==l&&document.body.classList.remove(l),\"function\"==typeof d&&d(),f.info(i+\": restart\"))),void 0===p[i]){let t=f.selele(a);if(null!==t){let e=document.createElement(\"span\");for(var u in e.classList.add(f.selcss(\"button_outlined-button_\")),e.classList.add(f.selcss(\"stage-header_stage-button_\")),e.classList.add(\"tfgsGuimodifyButton\"),r)e.style[u]=r[u];e.innerText=o,e.checked=!1,e.addEventListener(\"click\",function(){e.checked?(void 0!==l&&document.body.classList.remove(l),\"function\"==typeof d&&d(),e.innerText=o):(void 0!==l&&document.body.classList.add(l),\"function\"==typeof c&&c(),e.innerText=s),e.checked^=!0,dispatchEvent(new Event(\"resize\"))}),t.appendChild(e),n.clickaftercreate&&e.click(),p[i]=e,f.info(i+\": OK\")}}}else void 0!==p[i]&&(p[i].remove(),(p[i]=void 0)!==l&&document.body.classList.remove(l),\"function\"==typeof d&&d(),dispatchEvent(new Event(\"resize\")),f.info(i+\": OFF\"))}function l(){try{let e=f.selele(\"sprite-selector_scroll-wrapper_\");function t(){let e=p.fullscreen;null===document.fullscreenElement!=(\"✠\"===e.innerText)&&e.click()}null!==e&&(n.foldspriteinfo||n.foldstagebutton||n.foldthestage?e.style.position=\"relative\":e.style.position=\"inherit\"),n.expand100?document.body.classList.contains(\"tfgsGuimodifyExpand100\")||(document.body.classList.add(\"tfgsGuimodifyExpand100\"),dispatchEvent(new Event(\"resize\"))):document.body.classList.contains(\"tfgsGuimodifyExpand100\")&&(document.body.classList.remove(\"tfgsGuimodifyExpand100\"),dispatchEvent(new Event(\"resize\"))),n.foldmenu?\"\"===document.body.style.getPropertyValue(\"--tfgsGuimodifyMenubarHeight\")&&document.body.style.setProperty(\"--tfgsGuimodifyMenubarHeight\",window.getComputedStyle(f.selele(\"gui_menu-bar-position_\")).height):\"\"!==document.body.style.getPropertyValue(\"--tfgsGuimodifyMenubarHeight\")&&document.body.style.removeProperty(\"--tfgsGuimodifyMenubarHeight\"),o({buttonid:\"foldmenubar\",enable:n.foldmenu,styles:{left:0,top:\"100%25\",position:\"absolute\"},addinner:\"▲\",removeinner:\"▼\",targetcss:\"gui_menu-bar-position_\",cssname:\"tfgsGuimodifyMenubarFold\",clickaftercreate:!0}),o({buttonid:\"fullscreen\",enable:n.fullscreen,styles:{right:\"calc(2em + 1px)\",top:\"0.3em\",position:\"absolute\"},addinner:\"✠\",removeinner:\"×\",targetcss:\"gui_editor-wrapper_\",cssname:\"tfgsGuimodifyFullscreen\",onadd:function(e){document.body.requestFullscreen().catch(f.onerror)},onremove:function(e){document.exitFullscreen().catch(f.onerror)}}),n.fullscreen!==i&&(n.fullscreen?document.addEventListener(\"fullscreenchange\",t):document.removeEventListener(\"fullscreenchange\",t),i=n.fullscreen),o({buttonid:\"foldstagetarget\",enable:n.foldstagetarget,styles:{right:0,top:\"0.3em\",position:\"absolute\"},addinner:\"▶\",removeinner:\"◀\",targetcss:\"gui_editor-wrapper_\",cssname:\"tfgsGuimodifyStagetargetFold\"}),o({buttonid:\"foldblocktool\",enable:n.foldblocktool,styles:{left:\"calc(60px + 0.5em)\",top:\"0.5em\",position:\"absolute\",zIndex:2e3},addinner:\"◀\",removeinner:\"▶\",targetcss:\"injectionDiv\",cssname:\"tfgsGuimodifyBlocktoolFold\"}),o({buttonid:\"foldspriteinfo\",enable:n.foldspriteinfo,styles:{left:0,top:0,position:\"absolute\"},addinner:\"▲\",removeinner:\"▼\",targetcss:\"sprite-selector_scroll-wrapper_\",cssname:\"tfgsGuimodifySpriteinfoFold\"}),o({buttonid:\"foldstagebutton\",enable:n.foldstagebutton,styles:{right:0,top:\"calc(2em + 1px)\",position:\"absolute\"},addinner:\"▶\",removeinner:\"◀\",targetcss:\"sprite-selector_scroll-wrapper_\",cssname:\"tfgsGuimodifyStagebuttonFold\"}),o({buttonid:\"foldthestage\",enable:n.foldthestage,styles:{right:0,top:0,position:\"absolute\"},addinner:\"▲\",removeinner:\"▼\",targetcss:\"sprite-selector_scroll-wrapper_\",cssname:\"tfgsGuimodifyStageFold\"}),o({buttonid:\"foldassetpanel\",enable:n.foldassetpanel,styles:{right:0,top:0,position:\"absolute\"},addinner:\"▶\",removeinner:\"◀\",targetcss:\"selector_wrapper_\",cssname:\"tfgsGuimodifyAssetpanelFold\"})}catch(e){f.error(e)}}M.func.add({id:\"guifold\",name:\"折叠展开按钮\",info:\"添加可以折叠舞台、角色，展开列表等区域的按钮\",option:{foldmenu:{type:\"check\",name:\"折叠菜单\",default:!0},fullscreen:{type:\"check\",name:\"全屏按钮\",default:!0},foldblocktool:{type:\"check\",name:\"折叠jimuhe\",default:!0},foldstagetarget:{type:\"check\",name:\"折叠舞台和角色列表\",default:!0},foldspriteinfo:{type:\"check\",name:\"折叠角色参数\",default:!0},foldstagebutton:{type:\"check\",name:\"折叠舞台按钮\",default:!0},foldthestage:{type:\"check\",name:\"折叠舞台\",default:!0},foldassetpanel:{type:\"check\",name:\"折叠asset\",default:!0},expand100:{type:\"check\",name:\"填满屏幕(实验)\",default:!1}},onenable:function(e){f=e,n=f.getoption(),-1===t&&(t=setInterval(l,200))},ondisable:function(){-1!==t&&(clearInterval(t),n={},l(),t=-1)},onoption:function(){n=f.getoption()}})}let t;M.func.add({id:\"example\",name:\"自定义窗口标题\",author:\"作者名字\",version:\"v0.1.0\",info:\"让你能够修改窗口的标题\",default:!1,option:{title:{type:\"text\",name:\"窗口标题\",maxlength:16,default:\"示例标题\"}},onenable:function(e){t=document.title,document.title=e.getoption().title},ondisable:function(e){document.title=t},onoption:function(e){document.title=e.getoption().title}});{let t,n=null,r=null,i=\"?\",a=null,e=-1,o=\"?\";function c(){if(-1===e)e=setInterval(c,100);else{if(null===a){n=document.getElementById(\"gandi-terminal\"),r=n.children[1];let e=window.getComputedStyle(r),i=M.element.create(\"span\",\"tfgsCCWtermSpan\"),o=Number(e.width.slice(0,-2))+20,s=Number(e.height.slice(0,-2))+20;t.log(e.width),t.log(e.height),a=M.window.create({title:\"wterm\",canClose:!1,width:o+6,height:s+26,onResize:function(){let e=window.getComputedStyle(this.innerDiv);var t=Number(e.width.slice(0,-2)),n=Number(e.height.slice(0,-2));i.style.setProperty(\"--scale\",Math.min(t/o,n/s))}}),i.innerHTML=\"<span></span>\",i.children[0].appendChild(r),i.style.setProperty(\"--termWidth\",o+\"px\"),i.style.setProperty(\"--termHeight\",s+\"px\"),a.innerDiv.appendChild(i),n.style.display=\"none\"}if(a.title=n.children[0].children[0].innerText,a._refresh(),i!==n.style.visibility)if(i=n.style.visibility,t.log(\"visibility: \"+i),\"visible\"!==n.style.visibility)switch(t.getoption().mode){case\"respect\":a.windowDiv.style.visibility=\"hidden\";break;case\"minmax\":case\"minshow\":a.minimize()}else{switch(a.windowDiv.style.visibility=\"visible\",a.movetotop(),t.getoption().mode){case\"respect\":break;case\"minmax\":a.restore()}a.flash(200,3,!0)}}}M.func.add({id:\"ccwterm\",name:\"将ccw控制台放入tfgs窗口\",info:\"这个东西，我们叫它'Terminal'(终端)，微软叫它'Console'(控制台)，用着xterm又叫它控制台的ccw是\",default:!1,option:{mode:{type:\"menu\",name:\"响应控制台消息\",menu:[\"尊重显示和隐藏操作\",\"将显示/隐藏理解为还原/最小化\",\"显示时闪烁,隐藏时最小化\",\"忽略隐藏请求\"],value:[\"respect\",\"minmax\",\"minshow\",\"ignore\"],default:\"respect\"}},onenable:function(e){t=e,i=\"?\",o=t.getoption().mode,c()},ondisable:function(){-1!==e&&(clearInterval(e),e=-1),null!==a&&(a.close(),a=null),null!==n&&(n.style.display=\"block\",n.appendChild(r))},onoption:function(){t.getoption().mode!==o&&(i=\"?\",o=t.getoption().mode)}})}let n;function f(){let e=M.window.create({title:\"Teriteri\",canMaximize:!1,canMinimize:!1,canResize:!1,height:130,width:130,onClose:p});e.innerDiv.style=\"vertical-align:middle;text-align:center;font-size:80px;\",e.innerDiv.innerText=\"☆\",n.push(e)}function p(){n.splice(n.indexOf(this),1),f(),f()}M.func.add({id:\"windowf___\",name:\"window f___\",onenable:function(e){n=[],f()},ondisable:function(){for(var e in n)n[e].onClose=function(){},n[e].close()},onoption:function(){}});{let a,l,i,o,s=-1,r=-1,c=0;const b=1200;function h(e){2===e.button&&g(e.clientX,e.clientY)}function m(e){0!==e.touches.length&&g((e=e.touches[0]).clientX,e.clientY)}function g(t,e){t=document.elementFromPoint(t,e);let i,o;if(null!==t){let e=function(e){for(;null!==e&&\"svg\"!==e.tagName.toLowerCase();)e=e.parentElement;return e}(t);null!==e&&(i=e.classList.contains(\"blocklyFlyout\"),o=function(e){for(;null!==e&&\"svg\"!==e.tagName.toLowerCase();){if(\"g\"===e.tagName.toLowerCase()){var t=e.getAttribute(\"data-id\");if(null!==t)return t}e=e.parentElement}return null}(t),-1!==r&&(clearInterval(r),r=-1),c=0,r=setInterval(function(){var e,n,t=a.selele(\"blocklyContextMenu\");null!==t?(clearInterval(r),r=-1,i,e=o,n=t,null!==e?(v(\"复制这个积木\",function(){y(e,!1,!0),n.remove()},n),v(\"复制这组积木\",function(){y(e,!0,!1),n.remove()},n)):(v(\"复制全部积木\",function(){y(null,!0,!1),n.remove()},n),v(\"粘贴积木文本\",function(){function t(e){let t=a.blockly();var e=t.Xml.textToDom(e),n=t.Xml.domToWorkspace(e,l);if(0===n.length)throw new Error(\"粘贴失败\");var i,e=l.getMetrics(),o=e.viewLeft+15;let s=e.viewTop+15;for(let t=0;t<n.length;t++){let e=l.getBlockById(n[t]);null===e.getParent()&&(i=e.getRelativeToSurfaceXY(),e.moveBy(o/l.scale-i.x,s/l.scale-i.y),s+=(e.getHeightWidth().height+30)*l.scale)}}\"clipboard\"in navigator?navigator.clipboard.readText().then(t).catch(function(e){a.onerror(e),t(prompt(\"在下方粘贴:\"))}):t(prompt(\"在下方粘贴:\")),n.remove()},n))):(c+=10)>=b&&(clearInterval(r),r=-1)},10))}}function v(e,t,n){let i=document.createElement(\"div\");i.classList.add(\"goog-menuitem\"),i.setAttribute(\"role\",\"menuitem\"),i.style.userSelect=\"none\",i.innerText=e,i.addEventListener(\"click\",t),n.parentElement.style.height=\"4500px\",n.appendChild(i)}function y(i,o,s){try{let t=a.blockly();var r=t.Xml.workspaceToDom(l);let n;if(null===i)n=t.Xml.domToText(r,l);else{let e=function t(e,n){if(e.getAttribute(\"id\")===n)return e;var i=e.children;for(let e=0;e<i.length;e++){var o=t(i[e],n);if(null!==o)return o}return null}(r,i);for(;null!==e&&\"block\"!==e.tagName.toLowerCase();)e=e.parentElement;if(null===e)throw new Error(\"复制失败:找不到积木\");if(s){let t=e.children;for(let e=0;e<t.length;e++)\"next\"===t[e].tagName.toLowerCase()&&(t[e].remove(),e--)}if(o)for(;null!==e.parentElement&&(\"block\"===e.parentElement.tagName.toLowerCase()||\"next\"===e.parentElement.tagName.toLowerCase());)e=e.parentElement;n=\"<xml>\"+t.Xml.domToText(e,l)+\"</xml>\"}\"clipboard\"in navigator?navigator.clipboard.writeText(n).then(function(){}).catch(function(e){a.onerror(e),prompt(\"请复制以下内容\",n)}):prompt(\"请复制以下内容\",n)}catch(e){a.onerror(e)}}M.func.add({id:\"copyblock\",name:\"复制积木为文字\",info:\"在右键菜单中添加“复制积木”“粘贴积木”选项，可以跨作品复制，或者粘贴到记事本(是xml格式)\",default:!1,option:{},onenable:function t(e,n){a=e,n=void 0===n?0:n;try{l=a.workspace(),i=a.toolbox(),(o=a.selele(\"injectionDiv\")).addEventListener(\"touchstart\",m,!0),document.body.addEventListener(\"mousedown\",h,!0),a.log(\"打开\")}catch(e){return a.onerror(e),a.log(\"启动失败次数: \",n+1),void(s=setTimeout(function(){t(a,n+1)},1e3))}},ondisable:function(){-1!==s&&(clearTimeout(s),s=-1),o&&o.removeEventListener(\"touchstart\",m,!0),document.body.removeEventListener(\"mousedown\",h,!0),a.log(\"关闭\")},onoption:function(){}})}{let l=null,t=-1,n=null;function w(){if(null===n){n=M.window.create({title:\"forceColor\",haveLogo:!1,canClose:!1,canMaximize:!1,x:100,y:80,width:250,height:160,minWidth:120,minHeight:120});let e=M.element.create(\"div\",\"tfgsForcecolorWin\"),a=(e.innerHTML=`\\n类型: <select>\\n\t<option value=\"0\">填充颜色</option>\\n\t<option value=\"1\">轮廓颜色</option>\\n</select><br/>\\n颜色1: <input type=\"text\" value=\"#00ff00\"></input><br/>\\n颜色2: <input type=\"text\" value=\"#ff0000\"></input><br/>\\n混合模式: <select>\\n\t<option value=\"SOLID\">■</option>\\n\t<option value=\"VERTICAL\">↓</option>\\n\t<option value=\"HORIZONTAL\">→</option>\\n\t<option value=\"RADIAL\">○</option>\\n</select><br/>\\n<input type=\"button\" value=\"设置\"></input>\\n<pre>颜色格式: #RRGGBB 或者 rgb(红色, 绿色, 蓝色)\\n透明颜色: #RRGGBBAA 或者 rgba(红色, 绿色, 蓝色, 不透明度)</pre>\\n`,e.children);a[8].addEventListener(\"click\",function(){try{{var i=Number(a[0].value),o={primary:a[2].value,secondary:a[4].value,gradientType:a[6].value},s=l.selele(\"paint-editor_editor-container-top_\").children[1].children[0].children[i];let e=l.reactInternal(s).return.return.return.stateNode,t=(e.handleChangeGradientType(o.gradientType),e.props.onChangeColorIndex(0),e.handleChangeColor(o.primary),\"SOLID\"!==o.gradientType&&(e.props.onChangeColorIndex(1),e.handleChangeColor(o.secondary)),e.handleCloseColor(),e.props.onUpdateImage(),l.vm()),n=M.funcapi.paint().color;var r=1===i?\"strokeColor\":\"fillColor\";n[r].gradientType=o.gradientType,n[r].primary=o.primary,n[r].secondary=o.secondary,t.refreshWorkspace()}}catch(e){l.onerror(e)}}),n.innerDiv.appendChild(e)}}M.func.add({id:\"forcecolor\",name:\"强行设定颜色\",onenable:function(e){l=e,-1===t&&(t=setInterval(w,100))},ondisable:function(){-1!==t&&(clearInterval(t),t=-1),null!==n&&(n.close(),n=null)},onoption:function(){}})}{let e=document.createElement(\"style\");e.innerHTML='.tfgsButton{display:inline-block;min-width:40px;height:25px;line-height:25px;text-align:center;font-size:16px;color:#000;margin:2px;background:#fff;user-select:none;border-radius:2px;box-shadow:0 0 2px rgba(0,0,0,.5)}.tfgsButton:active{background:#9cf}.tfgsDisable{display:none}.tfgsRight{float:right}.tfgsLogFormat{display:block;white-space:pre-wrap;word-break:break-all;font-family:monospace;font-size:15;overflow:scroll}.tfgsLogFormat>:nth-child(odd){background:#f0f8ff}.tfgsLogFormat>:nth-child(2n){background:#def}.tfgsLogContent{height:calc(100%25 - 30px);background:#fff}.tfgsLogButtons{height:30px;background:var(--tfgsWindowColor)}.tfgsMenuContent{height:calc(100%25 - 30px);background:#f0f8ff;overflow:auto;text-align:center}.tfgsMenuButtons{height:30px;background:var(--tfgsWindowColor)}.tfgsMenuFunc{margin:5px;border-radius:2px;box-shadow:0 0 2px rgba(0,0,0,.5);overflow:hidden;text-align:left}.tfgsMenuFuncOption{background:#def;padding:2px}.tfgsMenuFuncOptionOne{display:inline-block;margin:2px;padding:2px;background:#bdf;box-shadow:0 0 2px rgba(0,0,0,.5);border-radius:2px;min-width:calc(25%25 - 10px);max-width:calc(100%25 - 10px)}.tfgsMenuFunc input,.tfgsMenuFunc select{position:relative;vertical-align:middle;border:none;background:#fff;width:100px;height:20px;margin:2px;padding:2px;box-shadow:0 0 2px rgba(0,0,0,.5);border-radius:2px}.tfgsMenuFuncOptionOne>input{box-shadow:0 0 2px rgba(0,0,0,.5) inset}.tfgsMenuFuncOptionOne>input[type=checkbox],.tfgsMenuFuncTitle>input{width:20px;height:20px;box-shadow:0 0 2px rgba(0,0,0,.5)}.tfgsMenuFunc input:active,.tfgsMenuFunc select:active{background:#9cf}.tfgsMenuFunc input:focus,.tfgsMenuFunc select:focus{background:#def;outline:0}.tfgsMenuFuncTitle{background:#08f;color:#fff;padding:2px;font-weight:700;font-family:monospace}.tfgsMenuFuncInfo{font-size:12px}.tfgsMenuFuncName{font-size:15px}.tfgsWindow.tfgsEmergency{--tfgsWindowColor:#f80}.tfgsWindow{--tfgsWindowColor:#08f;box-shadow:0 0 2px #000;position:fixed;background:#fff;border:3px solid var(--tfgsWindowColor);border-radius:3px;overflow:hidden;box-sizing:border-box}.tfgsWindow *{box-sizing:content-box}.tfgsWindowTitle{background:var(--tfgsWindowColor);display:flex;display:-webkit-flex;flex-flow:row nowrap;align-items:center;border-bottom:3px solid var(--tfgsWindowColor);color:#fff;font-family:sans-serif;font-size:16px;line-height:20px;height:20px}.tfgsWindowTitle>span{width:20px;height:20px;text-align:center;flex:none;user-select:none;-moz-user-select:none}.tfgsWindowTitle>span:active{background:rgba(0,0,0,.25);box-shadow:1px 1px 2px rgba(0,0,0,.3) inset}.tfgsWindowTitle>.tfgsWindowText{width:fit-content;flex:auto;overflow:hidden;white-space:pre;text-overflow:ellipsis;text-overflow:\"...\";position:relative}.tfgsWindowTitle>.tfgsWindowText:active{background:0 0;box-shadow:none}.tfgsWindowContent{height:calc(100%25 - 20px - 2px);overflow:auto;position:relative;font-size:16px;font-family:monospace;color:#000}.tfgsWindowResize{position:absolute;right:0;bottom:0;width:0;height:0;border-left:15px solid transparent;border-bottom:15px solid var(--tfgsWindowColor);cursor:se-resize}.tfgsWindowResize:after{content:\"=\";position:absolute;left:-8px;top:0;transform:rotate(-45deg);color:#fff}.tfgsJoystick{display:flex;padding:2px;height:calc(100%25 - 4px)}.tfgsJoystickKeyBoard{width:calc(100%25 - 4px);flex-flow:column nowrap;border:1px solid #000;font-size:20px;padding:1px}.tfgsJoystickKeyBoard>span{display:flex;flex:1 1 0;flex-flow:row nowrap;overflow:hidden}.tfgsJoystickKeyBoard>span>span{flex:1 1 0;margin:1px;border:1px solid #000;font-size:20px;box-sizing:border-box;white-space:pre;overflow:hidden;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.tfgsJoystickMouse{width:calc(100%25 - 4px);flex-flow:column nowrap;border:1px solid #000;font-size:20px;padding:1px}.tfgsJoystickMouse>.tfgsJoystickMouseMove{flex:4 4 0;border:1px solid #000;margin:1px;padding:1px}.tfgsJoystickMouse>span{flex:1 1 0;display:flex;flex-flow:row nowrap}.tfgsJoystickMouseClick,.tfgsJoystickMouseSwitch{flex:1 1 0;border:1px solid #000;margin:1px;padding:1px}.tfgsJoystickCursor{position:fixed;z-index:1000000000;text-shadow:0 0 2px #fff;color:grey;pointer-events:none;font-size:30px}.tfgsJoystickGamepad{display:flex;flex-flow:row nowrap;width:calc(100%25 - 4px)}.tfgsJoystickGamepad>span{border:1px solid #000;flex:1 1 0;overflow:hidden}.tfgsJoystickJoystick{display:flex;width:100%25;height:100%25;align-items:center;justify-content:center}.tfgsJoystickJoystick>span{display:flex;position:relative;width:var(--size);height:var(--size);border:1px solid #000;border-radius:1000px;align-items:center;justify-content:center}.tfgsJoystickJoystick>span>span{position:relative;width:50%25;height:50%25;border:1px solid #000;border-radius:1000px}.tfgsJoystickJoystickKeyBoard{display:flex;height:calc(100%25 - 4px);flex-flow:column nowrap;border:1px solid #000;font-size:20px;padding:1px}.tfgsJoystickJoystickKeyBoard>span{display:flex;flex:1 1 0;flex-flow:row nowrap;overflow:hidden}.tfgsJoystickJoystickKeyBoard>span>span{flex:1 1 0;margin:5px;text-align:center;border:1px solid #000;font-size:20px;box-sizing:border-box;white-space:pre;overflow:hidden;border-radius:1000px;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.tfgsJoystickJoystickMouse{display:inline-block;height:100%25;width:100%25}.tfgsJoystickSwitch{position:absolute;right:2px;bottom:2px;height:30px;width:30px;background-color:#fff!important}span.tfgsGuimodifyButton{position:absolute;color:grey;font-size:1em;line-height:1em;text-align:center}body.tfgsGuimodifyMenubarFold div[class^=gui_menu-bar-position_]{top:calc(0px - var(--tfgsGuimodifyMenubarHeight));margin-bottom:calc(0px - var(--tfgsGuimodifyMenubarHeight))}body.tfgsGuimodifyMenubarFold div[class^=gui_body-wrapper_]{height:100%25}body.tfgsGuimodifyBlocktoolFold .blocklyFlyout,body.tfgsGuimodifyBlocktoolFold .blocklyFlyoutScrollbar{left:-250px}body.tfgsGuimodifyStagetargetFold div[class^=gui_stage-and-target-wrapper_]{display:none}body.tfgsGuimodifySpriteinfoFold div[class^=sprite-info_sprite-info_]{max-height:0;padding:0;overflow:hidden}body.tfgsGuimodifyStagebuttonFold div[class^=target-pane_stage-selector-wrapper_]{max-width:0;padding:0;margin-left:0;margin-right:0;overflow:hidden}body.tfgsGuimodifyStageFold div[class^=stage-wrapper_stage-canvas-wrapper_]{max-height:0;padding:0;overflow:hidden}body.tfgsGuimodifyFullscreen{overflow:scroll}body.tfgsGuimodifyExpand100{position:fixed;bottom:0}body.tfgsGuimodifyAssetpanelFold [class^=selector_wrapper_]{position:absolute;height:100%25;width:100%25;z-index:2}body.tfgsGuimodifyAssetpanelFold [class^=selector_list-area_]{flex-direction:row;flex-wrap:wrap;align-content:flex-start}body.tfgsGuimodifyAssetpanelFold [class*=\" sprite-selector-item_sprite-selector-item_\"]{margin-left:.8em}body.tfgsGuimodifyAssetpanelFold [class^=asset-panel_detail-area_]{padding-left:45px}.tfgsCCWtermSpan{position:absolute;height:100%25;width:100%25;display:flex;align-items:center;justify-content:center}.tfgsCCWtermSpan>span{display:inline-block;width:calc(var(--termWidth) * var(--scale));height:calc(var(--termHeight) * var(--scale));overflow:hidden}.tfgsCCWtermSpan>span>div#terminal-container{background:#000;transform:scale(var(--scale));transform-origin:-10px -10px}.tfgsForcecolorWin{font-size:16px;text-align:center}.tfgsForcecolorWin input{width:150px;border:1px solid #000}.tfgsForcecolorWin pre{font-size:8px}',document.head.appendChild(e)}M.data.load().then(M.menu.create).catch(M.error)}catch(e){throw alert(e.message),console.error(e),e}";
			document.getElementById("copyme").href = "j" + x;
			document.getElementById("copymee").onfocus = function (e) {
				document.getElementById("copymee").select();
			};
			document.getElementById("copymee").oncut = p;
			document.getElementById("copymee").onpaste = p;
			document.getElementById("copymee").oninput = p;
			document.getElementById("copyme").onclick = function(e) {
				alert("请右键点击后选择加入到书签");
				e.preventDefault();
			};
			function p(e) {
				document.getElementById("copymee").value = x;
				e.preventDefault();
			};
		</script>
	</body>
</html>